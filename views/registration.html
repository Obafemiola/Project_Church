<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Member Registration Form - CLAM Ambassadors Church</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Copy all the existing styles from the previous form, but update the background */
        :root {
            --primary-color: #6366f1;
            --secondary-color: #4f46e5;
            --accent-color: #818cf8;
            --success-color: #22c55e;
            --text-color: #1e293b;
            --gradient-start: #4338ca;
            --gradient-end: #6366f1;
        }

        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                        url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1974') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            color: var(--text-color);
            font-family: 'Poppins', sans-serif;
            position: relative;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        h1 {
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            font-weight: 700;
            margin-bottom: 2rem;
            font-size: 2.5rem;
            letter-spacing: -0.5px;
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
            animation: fadeInDown 1s ease-out;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-color), transparent);
            border-radius: 2px;
            animation: expandWidth 1s ease-out forwards;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 24px;
            margin-bottom: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.5s ease-out;
        }

        .form-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .section-title {
            color: var(--primary-color);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--accent-color);
            font-weight: 600;
            font-size: 1.5rem;
        }

        /* Add all the remaining styles from the previous form */
        /* ... existing styles ... */

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes expandWidth {
            from { width: 0; }
            to { width: 100%; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.8) 100%);
            z-index: 0;
        }

        /* Add validation styles */
        .form-control.is-invalid,
        .form-select.is-invalid {
            border-color: var(--bs-form-invalid-border-color);
            padding-right: calc(1.5em + 0.75rem);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right calc(0.375em + 0.1875rem) center;
            background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
        }

        .invalid-feedback {
            display: none;
            width: 100%;
            margin-top: 0.25rem;
            font-size: 0.875em;
            color: var(--bs-form-invalid-color);
        }

        .form-control.is-invalid ~ .invalid-feedback,
        .form-select.is-invalid ~ .invalid-feedback {
            display: block;
        }

        /* Required field indicator */
        .required-field::after {
            content: "*";
            color: #dc3545;
            margin-left: 4px;
        }

        /* Tooltip styles */
        .form-tooltip {
            position: relative;
            display: inline-block;
        }

        .form-tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .form-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Alert styles */
        .alert {
            border-radius: 8px;
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid transparent;
        }

        .alert-danger {
            color: #842029;
            background-color: #f8d7da;
            border-color: #f5c2c7;
        }

        .alert-success {
            color: #0f5132;
            background-color: #d1e7dd;
            border-color: #badbcc;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .form-section {
                padding: 20px;
                margin-bottom: 15px;
            }

            .section-title {
                font-size: 1.25rem;
            }

            .form-tooltip .tooltip-text {
                width: 160px;
            }
        }

        /* Accessibility improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <div class="container my-5">
        <h1 class="text-center mb-4">Member Registration Form</h1>
        <div id="alertArea" role="alert" aria-live="polite"></div>
        
        <form id="registrationForm" novalidate>
            <!-- Personal Information -->
            <div class="form-section">
                <h2 class="section-title">Personal Information</h2>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="firstName" class="form-label required-field">First Name</label>
                        <div class="form-tooltip">
                            <input type="text" class="form-control" id="firstName" name="firstName" required>
                            <span class="tooltip-text">Enter your legal first name</span>
                            <div class="invalid-feedback">Please enter your first name</div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lastName" class="form-label required-field">Last Name</label>
                        <div class="form-tooltip">
                            <input type="text" class="form-control" id="lastName" name="lastName" required>
                            <span class="tooltip-text">Enter your legal last name</span>
                            <div class="invalid-feedback">Please enter your last name</div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="dateOfBirth" class="form-label required-field">Date of Birth</label>
                        <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth" required>
                        <div class="invalid-feedback">Please enter your date of birth</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="gender" class="form-label required-field">Gender</label>
                        <select class="form-select" id="gender" name="gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                        <div class="invalid-feedback">Please select your gender</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="maritalStatus" class="form-label required-field">Marital Status</label>
                        <select class="form-select" id="maritalStatus" name="maritalStatus" required>
                            <option value="">Select Marital Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                        </select>
                        <div class="invalid-feedback">Please select your marital status</div>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Social Media Handles</label>
                    <div>
                        <input type="checkbox" id="instagram" class="social-media-checkbox" name="socialMedia">
                        <label for="instagram" class="social-media-label">
                            <i class="bi bi-instagram me-2"></i> Instagram
                        </label>
                        <input type="text" class="form-control social-media-handle" id="instagramHandle" placeholder="@username">

                        <input type="checkbox" id="twitter" class="social-media-checkbox" name="socialMedia">
                        <label for="twitter" class="social-media-label">
                            <i class="bi bi-twitter me-2"></i> Twitter
                        </label>
                        <input type="text" class="form-control social-media-handle" id="twitterHandle" placeholder="@username">

                        <input type="checkbox" id="tiktok" class="social-media-checkbox" name="socialMedia">
                        <label for="tiktok" class="social-media-label">
                            <i class="bi bi-tiktok me-2"></i> TikTok
                        </label>
                        <input type="text" class="form-control social-media-handle" id="tiktokHandle" placeholder="@username">
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="form-section">
                <h2 class="section-title">Contact Information</h2>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="mobileNo" class="form-label required-field">Mobile Number</label>
                        <input type="tel" class="form-control" id="mobileNo" name="mobileNo" required pattern="[0-9]{11}" maxlength="11">
                        <div class="invalid-feedback">Please enter a valid 11-digit mobile number</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="email" class="form-label required-field">Email</label>
                        <input type="email" class="form-control" id="email" name="email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                        <div class="invalid-feedback">Please enter a valid email address</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="houseNo" class="form-label required-field">House Number</label>
                        <input type="text" class="form-control" id="houseNo" name="houseNo" required>
                        <div class="invalid-feedback">Please enter your house number</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="streetName" class="form-label required-field">Street Name</label>
                        <input type="text" class="form-control" id="streetName" name="streetName" required>
                        <div class="invalid-feedback">Please enter your street name</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="city" class="form-label">City of Residence</label>
                        <input type="text" class="form-control" id="city" name="city">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="country" class="form-label">Country of Residence</label>
                        <select class="form-select" id="country" name="country" required>
                            <option value="">Select Country</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="state" class="form-label">State of Residence</label>
                        <select class="form-select" id="state" name="state" required>
                            <option value="">Select State</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="localGovt" class="form-label">Local Government Area of Residence</label>
                        <select class="form-select" id="localGovt" name="localGovt" required>
                            <option value="">Select Local Government</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Emergency Contact -->
            <div class="form-section">
                <h2 class="section-title">Emergency Contact</h2>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="emergencyName" class="form-label required-field">Full Name</label>
                        <input type="text" class="form-control" id="emergencyName" name="emergencyName" required>
                        <div class="invalid-feedback">Please enter emergency contact's full name</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="emergencyRelationship" class="form-label required-field">Relationship</label>
                        <input type="text" class="form-control" id="emergencyRelationship" name="emergencyRelationship" required>
                        <div class="invalid-feedback">Please enter your relationship with emergency contact</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="emergencyPhone" class="form-label required-field">Phone Number</label>
                        <input type="tel" class="form-control" id="emergencyPhone" name="emergencyPhone" required pattern="[0-9]{11}" maxlength="11">
                        <div class="invalid-feedback">Please enter a valid 11-digit emergency contact number</div>
                    </div>
                </div>
            </div>

            <!-- Professional Information -->
            <div class="form-section">
                <h2 class="section-title">Professional Information <span class="required-field">**</span></h2>
                <div class="row mb-3">
                    <div class="col-12">
                        <label for="professionalStatus" class="form-label">Current Status</label>
                        <select class="form-select" id="professionalStatus" name="professionalStatus" required>
                            <option value="">Select Status</option>
                            <option value="working">Currently Working</option>
                            <option value="not_working">Not Working</option>
                            <option value="student">Student</option>
                            <option value="just_finished">Just Finished University</option>
                        </select>
                    </div>
                </div>

                <!-- Working Section -->
                <div id="workingSection" class="status-section" style="display: none;">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="profession" class="form-label">Profession</label>
                            <select class="form-select" id="profession" name="profession">
                                <option value="">Select Profession</option>
                                <option value="Software Engineer">Software Engineer</option>
                                <option value="Project Manager">Project Manager</option>
                                <option value="Healthcare Professional">Healthcare Professional</option>
                                <option value="Teacher">Teacher</option>
                                <option value="Accountant">Accountant</option>
                                <option value="Business Analyst">Business Analyst</option>
                                <option value="Data Scientist">Data Scientist</option>
                                <option value="Marketing Professional">Marketing Professional</option>
                                <option value="Human Resources">Human Resources</option>
                                <option value="Legal Professional">Legal Professional</option>
                                <option value="Sales Professional">Sales Professional</option>
                                <option value="Architect">Architect</option>
                                <option value="Civil Engineer">Civil Engineer</option>
                                <option value="Mechanical Engineer">Mechanical Engineer</option>
                                <option value="Electrical Engineer">Electrical Engineer</option>
                                <option value="Doctor">Doctor</option>
                                <option value="Nurse">Nurse</option>
                                <option value="Pharmacist">Pharmacist</option>
                                <option value="Financial Analyst">Financial Analyst</option>
                                <option value="Graphic Designer">Graphic Designer</option>
                                <option value="Content Writer">Content Writer</option>
                                <option value="Other">Other</option>
                            </select>
                            <div id="otherProfessionField" class="mt-2" style="display: none;">
                                <input type="text" class="form-control" id="otherProfession" name="otherProfession" placeholder="Please specify your profession">
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="workplaceName" class="form-label">Workplace Name</label>
                            <input type="text" class="form-control" id="workplaceName" name="workplaceName">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="position" class="form-label">Position/Role</label>
                            <input type="text" class="form-control" id="position" name="position">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="experienceDuration" class="form-label">Experience Duration (Years)</label>
                            <input type="number" class="form-control" id="experienceDuration" name="experienceDuration" min="0">
                        </div>
                    </div>
                </div>

                <!-- Not Working Section -->
                <div id="notWorkingSection" class="status-section" style="display: none;">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label for="cvUpload" class="form-label">Upload CV (PDF or Word format)</label>
                            <input type="file" class="form-control" id="cvUpload" name="cvUpload" accept=".pdf,.doc,.docx">
                        </div>
                    </div>
                </div>

                <!-- Student Section -->
                <div id="studentSection" class="status-section" style="display: none;">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="university" class="form-label">University/Polytechnic</label>
                            <select class="form-select" id="university" name="university">
                                <option value="">Select Institution</option>
                                <option value="University of Lagos">University of Lagos</option>
                                <option value="Ahmadu Bello University">Ahmadu Bello University</option>
                                <option value="Obafemi Awolowo University">Obafemi Awolowo University</option>
                                <option value="University of Ibadan">University of Ibadan</option>
                                <option value="University of Nigeria">University of Nigeria</option>
                                <option value="University of Benin">University of Benin</option>
                                <option value="Federal University of Technology, Akure">Federal University of Technology, Akure</option>
                                <option value="Federal University of Technology, Minna">Federal University of Technology, Minna</option>
                                <option value="Federal University of Technology, Owerri">Federal University of Technology, Owerri</option>
                                <option value="Lagos State University">Lagos State University</option>
                                <option value="Yaba College of Technology">Yaba College of Technology</option>
                                <option value="Federal Polytechnic, Ilaro">Federal Polytechnic, Ilaro</option>
                                <option value="Lagos State Polytechnic">Lagos State Polytechnic</option>
                                <option value="Other">Other</option>
                            </select>
                            <div id="otherUniversityField" class="mt-2" style="display: none;">
                                <input type="text" class="form-control" id="otherUniversity" name="otherUniversity" placeholder="Please specify your institution">
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="currentLevel" class="form-label">Current Level</label>
                            <select class="form-select" id="currentLevel" name="currentLevel">
                                <option value="">Select Level</option>
                                <option value="100">100 Level</option>
                                <option value="200">200 Level</option>
                                <option value="300">300 Level</option>
                                <option value="400">400 Level</option>
                                <option value="500">500 Level</option>
                                <option value="600">600 Level</option>
                                <option value="ND1">ND 1</option>
                                <option value="ND2">ND 2</option>
                                <option value="HND1">HND 1</option>
                                <option value="HND2">HND 2</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Just Finished University Section -->
                <div id="justFinishedSection" class="status-section" style="display: none;">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label for="nyscStatus" class="form-label">NYSC Placement Status</label>
                            <select class="form-select" id="nyscStatus" name="nyscStatus">
                                <option value="">Select NYSC Status</option>
                                <option value="about_to_go">About to Go NYSC placement</option>
                                <option value="doing_nysc">Doing NYSC</option>
                                <option value="about_to_finish">About to finish NYSC (Minimum 1 month left)</option>
                            </select>
                        </div>
                    </div>
                    <div id="stateOfPostingSection" class="row" style="display: none;">
                        <div class="col-md-6 mb-3">
                            <label for="stateOfPosting" class="form-label">State of Posting</label>
                            <select class="form-select" id="stateOfPosting" name="stateOfPosting">
                                <option value="">Select State of Posting</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Certifications -->
            <div class="form-section">
                <h2 class="section-title">Certifications</h2>
                <div class="mb-3">
                    <label for="certifications" class="form-label">Professional Certifications (comma-separated)</label>
                    <input type="text" class="form-control" id="certifications" name="certifications" placeholder="e.g., PMP, CISSP, AWS">
                </div>
            </div>

            <!-- Skills -->
            <div class="form-section">
                <h2 class="section-title">Skills</h2>
                <div class="mb-3">
                    <label for="skills" class="form-label">Professional Skills (comma-separated)</label>
                    <input type="text" class="form-control" id="skills" name="skills" placeholder="e.g., Project Management, Web Development, Digital Marketing">
                </div>
            </div>

            <!-- Church Support -->
            <div class="form-section">
                <h2 class="section-title">Church Support</h2>
                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="isAvailableForSupport" name="isAvailableForSupport">
                        <label class="form-check-label" for="isAvailableForSupport">
                            Are You Available To Join Any of The Ambassadors Church Department?
                        </label>
                    </div>
                </div>
                <div id="supportAreaField" style="display: none;">
                    <div class="mb-3">
                        <label for="supportArea" class="form-label">Area of Support</label>
                        <select class="form-select" id="supportArea" name="supportArea">
                            <option value="">Select Area</option>
                            <option value="career_coaching">Career Coaching</option>
                            <option value="legal_support">Legal Support</option>
                            <option value="mentoring">Mentoring</option>
                            <option value="church_worker">Church Worker</option>
                            <option value="worship_team">Worship Team</option>
                            <option value="children_ministry">Children's Ministry</option>
                            <option value="youth_ministry">Youth Ministry</option>
                            <option value="evangelism">Evangelism</option>
                            <option value="prayer_warrior">Prayer Warrior</option>
                            <option value="technical_support">Technical Support</option>
                            <option value="media_team">Media Team</option>
                            <option value="ushering">Ushering</option>
                            <option value="counseling">Counseling</option>
                            <option value="hospitality">Hospitality</option>
                            <option value="outreach_coordinator">Outreach Coordinator</option>
                        </select>
                        <div id="otherSupportAreaField" class="mt-2" style="display: none;">
                            <input type="text" class="form-control" id="otherSupportArea" name="otherSupportArea" placeholder="Please specify your area of support">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Entrepreneurial Interests -->
            <div class="form-section">
                <h2 class="section-title">Entrepreneurial Interests</h2>
                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="isEntrepreneur" name="isEntrepreneur">
                        <label class="form-check-label" for="isEntrepreneur">
                            Interested in Entrepreneurship or Mentorship?
                        </label>
                    </div>
                </div>
                <div id="businessTypeField" style="display: none;">
                    <div class="mb-3">
                        <label for="businessType" class="form-label">Type of Business Interest</label>
                        <select class="form-select" id="businessType" name="businessType">
                            <option value="">Select Type</option>
                            <option value="Small Business Owner">Small Business Owner</option>
                            <option value="Freelancer">Freelancer</option>
                            <option value="Consultant">Consultant</option>
                            <option value="E-commerce Entrepreneur">E-commerce Entrepreneur</option>
                            <option value="Tech Startup Founder">Tech Startup Founder</option>
                            <option value="Real Estate Investor">Real Estate Investor</option>
                            <option value="Franchise Owner">Franchise Owner</option>
                            <option value="Service Provider">Service Provider</option>
                            <option value="Digital Content Creator">Digital Content Creator</option>
                            <option value="Social Media Influencer">Social Media Influencer</option>
                            <option value="Online Educator">Online Educator</option>
                            <option value="Health and Wellness Coach">Health and Wellness Coach</option>
                            <option value="Financial Advisor">Financial Advisor</option>
                            <option value="Event Planner">Event Planner</option>
                            <option value="Food and Beverage Entrepreneur">Food and Beverage Entrepreneur</option>
                        </select>
                        <div id="otherBusinessTypeField" class="mt-2" style="display: none;">
                            <input type="text" class="form-control" id="otherBusinessType" name="otherBusinessType" placeholder="Please specify your business type">
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Submit Registration</button>
            </div>
        </form>

        <!-- Success Modal -->
        <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title" id="successModalLabel">Registration Successful!</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" onclick="closeSuccessModal()"></button>
                    </div>
                    <div class="modal-body text-center">
                        <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
                        <p class="mt-3 mb-0 h5">Thank you for registering!</p>
                        <p class="mt-2">Your Member ID is: <span id="memberIdDisplay" class="fw-bold"></span></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Countries data
        const countries = [
            "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan",
            "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina",
            "Botswana", "Brazil", "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cabo Verde", "Cambodia", "Cameroon", "Canada", "Central African Republic",
            "Chad", "Chile", "China", "Colombia", "Comoros", "Congo", "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti",
            "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Eswatini", "Ethiopia", "Fiji",
            "Finland", "France", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana",
            "Haiti", "Honduras", "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy", "Jamaica", "Japan", "Jordan",
            "Kazakhstan", "Kenya", "Kiribati", "Korea, North", "Korea, South", "Kosovo", "Kuwait", "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho",
            "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands",
            "Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", "Namibia",
            "Nauru", "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Macedonia", "Norway", "Oman", "Pakistan", "Palau",
            "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda",
            "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia",
            "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa",
            "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand",
            "Timor-Leste", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu", "Uganda", "Ukraine",
            "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela", "Vietnam",
            "Yemen", "Zambia", "Zimbabwe"
        ];

        // Nigerian states and local governments data
        const statesData = {
            "Abia": ["Aba North", "Aba South", "Arochukwu", "Bende", "Ikwuano", "Isiala Ngwa North", "Isiala Ngwa South", "Isuikwuato", "Obi Ngwa", "Ohafia", "Osisioma", "Ugwunagbo", "Ukwa East", "Ukwa West", "Umuahia North", "Umuahia South", "Umu Nneochi"],
            "Adamawa": ["Demsa", "Fufure", "Ganye", "Girei", "Gombi", "Guyuk", "Hong", "Jada", "Lamurde", "Madagali", "Maiha", "Mayo Belwa", "Michika", "Mubi North", "Mubi South", "Numan", "Shelleng", "Song", "Toungo", "Yola North", "Yola South"],
            "Akwa Ibom": ["Abak", "Eastern Obolo", "Eket", "Esit Eket", "Essien Udim", "Etim Ekpo", "Etinan", "Ibeno", "Ibesikpo Asutan", "Ibiono Ibom", "Ika", "Ikono", "Ikot Abasi", "Ikot Ekpene", "Ini", "Itu", "Mbo", "Mkpat Enin", "Nsit Atai", "Nsit Ibom", "Nsit Ubium", "Obot Akara", "Okobo", "Onna", "Oruk Anam", "Udung Uko", "Ukanafun", "Uruan", "Urue-Offong/Oruko", "Uyo"],
            "Anambra": ["Aguata", "Anambra East", "Anambra West", "Anaocha", "Awka North", "Awka South", "Ayamelum", "Dunukofia", "Ekwusigo", "Idemili North", "Idemili South", "Ihiala", "Njikoka", "Nnewi North", "Nnewi South", "Ogbaru", "Onitsha North", "Onitsha South", "Orumba North", "Orumba South", "Oyi"],
            "Bauchi": ["Alkaleri", "Bauchi", "Bogoro", "Damban", "Darazo", "Dass", "Gamawa", "Ganjuwa", "Giade", "Itas/Gadau", "Jama'are", "Katagum", "Kirfi", "Misau", "Ningi", "Shira", "Tafawa Balewa", "Toro", "Warji", "Zaki"],
            "Bayelsa": ["Brass", "Ekeremor", "Kolokuma/Opokuma", "Nembe", "Ogbia", "Sagbama", "Southern Ijaw", "Yenagoa"],
            "Benue": ["Ado", "Agatu", "Apa", "Buruku", "Gboko", "Guma", "Gwer East", "Gwer West", "Katsina-Ala", "Konshisha", "Kwande", "Logo", "Makurdi", "Obi", "Ogbadibo", "Ohimini", "Oju", "Okpokwu", "Otukpo", "Tarka", "Ukum", "Ushongo", "Vandeikya"],
            "Borno": ["Abadam", "Askira/Uba", "Bama", "Bayo", "Biu", "Chibok", "Damboa", "Dikwa", "Gubio", "Guzamala", "Gwoza", "Hawul", "Jere", "Kaga", "Kala/Balge", "Konduga", "Kukawa", "Kwaya Kusar", "Mafa", "Magumeri", "Maiduguri", "Marte", "Mobbar", "Monguno", "Ngala", "Nganzai", "Shani"],
            "Cross River": ["Abi", "Akamkpa", "Akpabuyo", "Bakassi", "Bekwarra", "Biase", "Boki", "Calabar Municipal", "Calabar South", "Etung", "Ikom", "Obanliku", "Obubra", "Obudu", "Odukpani", "Ogoja", "Yakuur", "Yala"],
            "Delta": ["Aniocha North", "Aniocha South", "Bomadi", "Burutu", "Ethiope East", "Ethiope West", "Ika North East", "Ika South", "Isoko North", "Isoko South", "Ndokwa East", "Ndokwa West", "Okpe", "Oshimili North", "Oshimili South", "Patani", "Sapele", "Udu", "Ughelli North", "Ughelli South", "Ukwuani", "Uvwie", "Warri North", "Warri South", "Warri South West"],
            "Ebonyi": ["Abakaliki", "Afikpo North", "Afikpo South", "Ebonyi", "Ezza North", "Ezza South", "Ikwo", "Ishielu", "Ivo", "Izzi", "Ohaozara", "Ohaukwu", "Onicha"],
            "Edo": ["Akoko-Edo", "Egor", "Esan Central", "Esan North-East", "Esan South-East", "Esan West", "Etsako Central", "Etsako East", "Etsako West", "Igueben", "Ikpoba Okha", "Oredo", "Orhionmwon", "Ovia North-East", "Ovia South-West", "Owan East", "Owan West", "Uhunmwonde"],
            "Ekiti": ["Ado Ekiti", "Efon", "Ekiti East", "Ekiti South-West", "Ekiti West", "Emure", "Gbonyin", "Ido Osi", "Ijero", "Ikere", "Ikole", "Ilejemeje", "Irepodun/Ifelodun", "Ise/Orun", "Moba", "Oye"],
            "Enugu": ["Aninri", "Awgu", "Enugu East", "Enugu North", "Enugu South", "Ezeagu", "Igbo Etiti", "Igbo Eze North", "Igbo Eze South", "Isi Uzo", "Nkanu East", "Nkanu West", "Nsukka", "Oji River", "Udenu", "Udi", "Uzo Uwani"],
            "FCT": ["Abaji", "Bwari", "Gwagwalada", "Kuje", "Kwali", "Municipal Area Council"],
            "Gombe": ["Akko", "Balanga", "Billiri", "Dukku", "Funakaye", "Gombe", "Kaltungo", "Kwami", "Nafada", "Shongom", "Yamaltu/Deba"],
            "Imo": ["Aboh Mbaise", "Ahiazu Mbaise", "Ehime Mbano", "Ezinihitte", "Ideato North", "Ideato South", "Ihitte/Uboma", "Ikeduru", "Isiala Mbano", "Isu", "Mbaitoli", "Ngor Okpala", "Njaba", "Nkwerre", "Nwangele", "Obowo", "Oguta", "Ohaji/Egbema", "Okigwe", "Orlu", "Orsu", "Oru East", "Oru West", "Owerri Municipal", "Owerri North", "Owerri West", "Unuimo"],
            "Jigawa": ["Auyo", "Babura", "Biriniwa", "Birnin Kudu", "Buji", "Dutse", "Gagarawa", "Garki", "Gumel", "Guri", "Gwaram", "Gwiwa", "Hadejia", "Jahun", "Kafin Hausa", "Kazaure", "Kiri Kasama", "Kiyawa", "Kaugama", "Maigatari", "Malam Madori", "Miga", "Ringim", "Roni", "Sule Tankarkar", "Taura", "Yankwashi"],
            "Kaduna": ["Birnin Gwari", "Chikun", "Giwa", "Igabi", "Ikara", "Jaba", "Jema'a", "Kachia", "Kaduna North", "Kaduna South", "Kagarko", "Kajuru", "Kaura", "Kauru", "Kubau", "Kudan", "Lere", "Makarfi", "Sabon Gari", "Sanga", "Soba", "Zangon Kataf", "Zaria"],
            "Kano": ["Ajingi", "Albasu", "Bagwai", "Bebeji", "Bichi", "Bunkure", "Dala", "Dambatta", "Dawakin Kudu", "Dawakin Tofa", "Doguwa", "Fagge", "Gabasawa", "Garko", "Garun Mallam", "Gaya", "Gezawa", "Gwale", "Gwarzo", "Kabo", "Kano Municipal", "Karaye", "Kibiya", "Kiru", "Kumbotso", "Kunchi", "Kura", "Madobi", "Makoda", "Minjibir", "Nasarawa", "Rano", "Rimin Gado", "Rogo", "Shanono", "Sumaila", "Takai", "Tarauni", "Tofa", "Tsanyawa", "Tudun Wada", "Ungogo", "Warawa", "Wudil"],
            "Katsina": ["Bakori", "Batagarawa", "Batsari", "Baure", "Bindawa", "Charanchi", "Dan Musa", "Dandume", "Danja", "Daura", "Dutsi", "Dutsin Ma", "Faskari", "Funtua", "Ingawa", "Jibia", "Kafur", "Kaita", "Kankara", "Kankia", "Katsina", "Kurfi", "Kusada", "Mai'Adua", "Malumfashi", "Mani", "Mashi", "Matazu", "Musawa", "Rimi", "Sabuwa", "Safana", "Sandamu", "Zango"],
            "Kebbi": ["Aleiro", "Arewa Dandi", "Argungu", "Augie", "Bagudo", "Birnin Kebbi", "Bunza", "Dandi", "Fakai", "Gwandu", "Jega", "Kalgo", "Koko/Besse", "Maiyama", "Ngaski", "Sakaba", "Shanga", "Suru", "Wasagu/Danko", "Yauri", "Zuru"],
            "Kogi": ["Adavi", "Ajaokuta", "Ankpa", "Bassa", "Dekina", "Ibaji", "Idah", "Igalamela Odolu", "Ijumu", "Kabba/Bunu", "Kogi", "Lokoja", "Mopa Muro", "Ofu", "Ogori/Magongo", "Okehi", "Okene", "Olamaboro", "Omala", "Yagba East", "Yagba West"],
            "Kwara": ["Asa", "Baruten", "Edu", "Ekiti", "Ifelodun", "Ilorin East", "Ilorin South", "Ilorin West", "Irepodun", "Isin", "Kaiama", "Moro", "Offa", "Oke Ero", "Oyun", "Pategi"],
            "Lagos": ["Agege", "Ajeromi-Ifelodun", "Alimosho", "Amuwo-Odofin", "Apapa", "Badagry", "Epe", "Eti Osa", "Ibeju-Lekki", "Ifako-Ijaiye", "Ikeja", "Ikorodu", "Kosofe", "Lagos Island", "Lagos Mainland", "Mushin", "Ojo", "Oshodi-Isolo", "Shomolu", "Surulere"],
            "Nasarawa": ["Akwanga", "Awe", "Doma", "Karu", "Keana", "Keffi", "Kokona", "Lafia", "Nasarawa", "Nasarawa Egon", "Obi", "Toto", "Wamba"],
            "Niger": ["Agaie", "Agwara", "Bida", "Borgu", "Bosso", "Chanchaga", "Edati", "Gbako", "Gurara", "Katcha", "Kontagora", "Lapai", "Lavun", "Magama", "Mariga", "Mashegu", "Mokwa", "Moya", "Paikoro", "Rafi", "Rijau", "Shiroro", "Suleja", "Tafa", "Wushishi"],
            "Ogun": ["Abeokuta North", "Abeokuta South", "Ado-Odo/Ota", "Egbado North", "Egbado South", "Ewekoro", "Ifo", "Ijebu East", "Ijebu North", "Ijebu North East", "Ijebu Ode", "Ikenne", "Imeko Afon", "Ipokia", "Obafemi Owode", "Odeda", "Odogbolu", "Ogun Waterside", "Remo North", "Shagamu"],
            "Ondo": ["Akoko North-East", "Akoko North-West", "Akoko South-West", "Akoko South-East", "Akure North", "Akure South", "Ese Odo", "Idanre", "Ifedore", "Ilaje", "Ile Oluji/Okeigbo", "Irele", "Odigbo", "Okitipupa", "Ondo East", "Ondo West", "Ose", "Owo"],
            "Osun": ["Atakunmosa East", "Atakunmosa West", "Aiyedaade", "Aiyedire", "Boluwaduro", "Boripe", "Ede North", "Ede South", "Ife Central", "Ife East", "Ife North", "Ife South", "Egbedore", "Ejigbo", "Ifedayo", "Ifelodun", "Ila", "Ilesa East", "Ilesa West", "Irepodun", "Irewole", "Isokan", "Iwo", "Obokun", "Odo Otin", "Ola Oluwa", "Olorunda", "Oriade", "Orolu", "Osogbo"],
            "Oyo": ["Afijio", "Akinyele", "Atiba", "Atisbo", "Egbeda", "Ibadan North", "Ibadan North-East", "Ibadan North-West", "Ibadan South-East", "Ibadan South-West", "Ibarapa Central", "Ibarapa East", "Ibarapa North", "Ido", "Irepo", "Iseyin", "Itesiwaju", "Iwajowa", "Kajola", "Lagelu", "Ogbomosho North", "Ogbomosho South", "Ogo Oluwa", "Olorunsogo", "Oluyole", "Ona Ara", "Orelope", "Ori Ire", "Oyo", "Oyo East", "Saki East", "Saki West", "Surulere"],
            "Plateau": ["Barkin Ladi", "Bassa", "Bokkos", "Jos East", "Jos North", "Jos South", "Kanam", "Kanke", "Langtang North", "Langtang South", "Mangu", "Mikang", "Pankshin", "Qua'an Pan", "Riyom", "Shendam", "Wase"],
            "Rivers": ["Abua/Odual", "Ahoada East", "Ahoada West", "Akuku-Toru", "Andoni", "Asari-Toru", "Bonny", "Degema", "Eleme", "Emuoha", "Etche", "Gokana", "Ikwerre", "Khana", "Obio/Akpor", "Ogba/Egbema/Ndoni", "Ogu/Bolo", "Okrika", "Omuma", "Opobo/Nkoro", "Oyigbo", "Port Harcourt", "Tai"],
            "Sokoto": ["Binji", "Bodinga", "Dange Shuni", "Gada", "Goronyo", "Gudu", "Gwadabawa", "Illela", "Isa", "Kebbe", "Kware", "Rabah", "Sabon Birni", "Shagari", "Silame", "Sokoto North", "Sokoto South", "Tambuwal", "Tangaza", "Tureta", "Wamako", "Wurno", "Yabo"],
            "Taraba": ["Ardo Kola", "Bali", "Donga", "Gashaka", "Gassol", "Ibi", "Jalingo", "Karim Lamido", "Kumi", "Lau", "Sardauna", "Takum", "Ussa", "Wukari", "Yorro", "Zing"],
            "Yobe": ["Bade", "Bursari", "Damaturu", "Fika", "Fune", "Geidam", "Gujba", "Gulani", "Jakusko", "Karasuwa", "Machina", "Nangere", "Nguru", "Potiskum", "Tarmuwa", "Yunusari", "Yusufari"],
            "Zamfara": ["Anka", "Bakura", "Birnin Magaji/Kiyaw", "Bukkuyum", "Bungudu", "Gummi", "Gusau", "Kaura Namoda", "Maradun", "Maru", "Shinkafi", "Talata Mafara", "Chafe", "Zurmi"]
        };

        // Populate countries dropdown
        const countrySelect = document.getElementById('country');
        countries.forEach(country => {
            const option = document.createElement('option');
            option.value = country;
            option.textContent = country;
            countrySelect.appendChild(option);
        });

        // Handle country change
        countrySelect.addEventListener('change', function() {
            const stateSelect = document.getElementById('state');
            const localGovtSelect = document.getElementById('localGovt');
            const stateContainer = stateSelect.parentElement;
            const lgaContainer = localGovtSelect.parentElement;

            // Reset state and LGA dropdowns
            stateSelect.innerHTML = '<option value="">Select State</option>';
            localGovtSelect.innerHTML = '<option value="">Select Local Government</option>';

            // Show/hide state and LGA fields based on country selection
            if (this.value === 'Nigeria') {
                stateContainer.style.display = 'block';
                lgaContainer.style.display = 'block';
                
                // Populate states for Nigeria
                Object.keys(statesData).forEach(state => {
                    const option = document.createElement('option');
                    option.value = state;
                    option.textContent = state;
                    stateSelect.appendChild(option);
                });
            } else {
                stateContainer.style.display = 'none';
                lgaContainer.style.display = 'none';
                stateSelect.value = '';
                localGovtSelect.value = '';
            }
        });

        // Update local governments when state changes
        document.getElementById('state').addEventListener('change', function() {
            const localGovtSelect = document.getElementById('localGovt');
            localGovtSelect.innerHTML = '<option value="">Select Local Government</option>';
            
            if (this.value && statesData[this.value]) {
                statesData[this.value].forEach(lg => {
                    const option = document.createElement('option');
                    option.value = lg;
                    option.textContent = lg;
                    localGovtSelect.appendChild(option);
                });
            }
        });

        // Handle social media checkboxes
        document.querySelectorAll('.social-media-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const handle = document.getElementById(this.id + 'Handle');
                handle.style.display = this.checked ? 'block' : 'none';
                if (!this.checked) handle.value = '';
            });
        });

        // Handle professional status changes
        document.getElementById('professionalStatus').addEventListener('change', function() {
            const workingSection = document.getElementById('workingSection');
            const notWorkingSection = document.getElementById('notWorkingSection');
            const studentSection = document.getElementById('studentSection');
            const justFinishedSection = document.getElementById('justFinishedSection');
            
            workingSection.style.display = 'none';
            notWorkingSection.style.display = 'none';
            studentSection.style.display = 'none';
            justFinishedSection.style.display = 'none';
            
            if (this.value === 'working') {
                workingSection.style.display = 'block';
            } else if (this.value === 'not_working') {
                notWorkingSection.style.display = 'block';
            } else if (this.value === 'student') {
                studentSection.style.display = 'block';
            } else if (this.value === 'just_finished') {
                justFinishedSection.style.display = 'block';
            }
        });

        // Handle church support checkbox
        document.getElementById('isAvailableForSupport').addEventListener('change', function() {
            const supportAreaField = document.getElementById('supportAreaField');
            supportAreaField.style.display = this.checked ? 'block' : 'none';
            if (!this.checked) document.getElementById('supportArea').value = '';
        });

        // Handle entrepreneur checkbox
        document.getElementById('isEntrepreneur').addEventListener('change', function() {
            const businessTypeField = document.getElementById('businessTypeField');
            businessTypeField.style.display = this.checked ? 'block' : 'none';
            if (!this.checked) document.getElementById('businessType').value = '';
        });

        // Handle "Other" options in dropdowns
        document.getElementById('profession').addEventListener('change', function() {
            const otherProfessionField = document.getElementById('otherProfessionField');
            const otherProfessionInput = document.getElementById('otherProfession');
            
            if (this.value === 'Other') {
                otherProfessionField.style.display = 'block';
                otherProfessionInput.required = true;
            } else {
                otherProfessionField.style.display = 'none';
                otherProfessionInput.required = false;
                otherProfessionInput.value = '';
            }
        });

        document.getElementById('university').addEventListener('change', function() {
            const otherUniversityField = document.getElementById('otherUniversityField');
            const otherUniversityInput = document.getElementById('otherUniversity');
            
            if (this.value === 'Other') {
                otherUniversityField.style.display = 'block';
                otherUniversityInput.required = true;
            } else {
                otherUniversityField.style.display = 'none';
                otherUniversityInput.required = false;
                otherUniversityInput.value = '';
            }
        });

        // Add these event listeners to the JavaScript section
        document.getElementById('supportArea').addEventListener('change', function() {
            const otherSupportAreaField = document.getElementById('otherSupportAreaField');
            const otherSupportAreaInput = document.getElementById('otherSupportArea');
            
            if (this.value === 'other') {
                otherSupportAreaField.style.display = 'block';
                otherSupportAreaInput.required = true;
            } else {
                otherSupportAreaField.style.display = 'none';
                otherSupportAreaInput.required = false;
                otherSupportAreaInput.value = '';
            }
        });

        document.getElementById('businessType').addEventListener('change', function() {
            const otherBusinessTypeField = document.getElementById('otherBusinessTypeField');
            const otherBusinessTypeInput = document.getElementById('otherBusinessType');
            
            if (this.value === 'other') {
                otherBusinessTypeField.style.display = 'block';
                otherBusinessTypeInput.required = true;
            } else {
                otherBusinessTypeField.style.display = 'none';
                otherBusinessTypeInput.required = false;
                otherBusinessTypeInput.value = '';
            }
        });

        // Form validation and submission
        document.getElementById('registrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Reset previous validation state
            clearValidationState();
            
            // Validate required fields based on current state
            const validationErrors = validateForm();
            
            if (validationErrors.length > 0) {
                // Display validation errors
                validationErrors.forEach(error => {
                    const field = document.getElementById(error.field);
                    if (field) {
                        field.classList.add('is-invalid');
                        const feedback = field.nextElementSibling;
                        if (feedback && feedback.classList.contains('invalid-feedback')) {
                            feedback.textContent = error.message;
                        }
                    }
                });
                return;
            }

            try {
                const formData = new FormData(this);
                const response = await fetch('/api/members/register', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                
                // Display success message with member ID
                document.getElementById('memberIdDisplay').textContent = result.memberId;
                const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                successModal.show();
                
                // Reset form
                this.reset();
                
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while submitting the form. Please try again.');
            }
        });

        function validateForm() {
            const errors = [];
            const requiredFields = {
                firstName: 'First Name',
                lastName: 'Last Name',
                dateOfBirth: 'Date of Birth',
                gender: 'Gender',
                maritalStatus: 'Marital Status',
                mobileNo: 'Mobile Number',
                email: 'Email',
                houseNo: 'House Number',
                streetName: 'Street Name',
                country: 'Country of Residence',
                emergencyName: 'Emergency Contact Name',
                emergencyRelationship: 'Emergency Contact Relationship',
                emergencyPhone: 'Emergency Contact Phone',
                professionalStatus: 'Professional Status'
            };

            // Validate basic required fields
            for (const [fieldId, fieldName] of Object.entries(requiredFields)) {
                const field = document.getElementById(fieldId);
                if (!field || !field.value || field.value.trim() === '') {
                    errors.push({ field: fieldId, message: `Please enter your ${fieldName}` });
                }
            }

            // Validate professional status specific fields
            const professionalStatus = document.getElementById('professionalStatus').value;
            if (professionalStatus === 'working') {
                const profession = document.getElementById('profession').value;
                const workplaceName = document.getElementById('workplaceName').value;
                const position = document.getElementById('position').value;
                const experienceDuration = document.getElementById('experienceDuration').value;

                if (!profession) {
                    errors.push({ field: 'profession', message: 'Please select your Profession' });
                }
                if (!workplaceName) {
                    errors.push({ field: 'workplaceName', message: 'Please enter your Workplace Name' });
                }
                if (!position) {
                    errors.push({ field: 'position', message: 'Please enter your Position' });
                }
                if (!experienceDuration) {
                    errors.push({ field: 'experienceDuration', message: 'Please enter your Experience Duration' });
                }
            } else if (professionalStatus === 'student') {
                const university = document.getElementById('university').value;
                const currentLevel = document.getElementById('currentLevel').value;

                if (!university) {
                    errors.push({ field: 'university', message: 'Please select your University/Institution' });
                }
                if (!currentLevel) {
                    errors.push({ field: 'currentLevel', message: 'Please select your Current Level' });
                }
            } else if (professionalStatus === 'just_finished') {
                const nyscStatus = document.getElementById('nyscStatus').value;
                if (!nyscStatus) {
                    errors.push({ field: 'nyscStatus', message: 'Please select your NYSC Status' });
                }
                if (nyscStatus === 'doing_nysc') {
                    const stateOfPosting = document.getElementById('stateOfPosting').value;
                    if (!stateOfPosting) {
                        errors.push({ field: 'stateOfPosting', message: 'Please select your State of Posting' });
                    }
                }
            } else if (professionalStatus === 'not_working') {
                const cvUpload = document.getElementById('cvUpload').files;
                if (!cvUpload || cvUpload.length === 0) {
                    errors.push({ field: 'cvUpload', message: 'Please upload your CV' });
                }
            }

            // Validate email format
            const emailField = document.getElementById('email');
            if (emailField.value && !isValidEmail(emailField.value)) {
                errors.push({ field: 'email', message: 'Please enter a valid email address' });
            }

            // Validate phone number format
            const phoneFields = ['mobileNo', 'emergencyPhone'];
            phoneFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field.value && !isValidPhone(field.value)) {
                    errors.push({ field: fieldId, message: 'Please enter a valid phone number' });
                }
            });

            // Validate country-specific fields
            const country = document.getElementById('country').value;
            if (country === 'Nigeria') {
                const state = document.getElementById('state').value;
                const localGovt = document.getElementById('localGovt').value;
                
                if (!state) {
                    errors.push({ field: 'state', message: 'Please select your State' });
                }
                if (!localGovt) {
                    errors.push({ field: 'localGovt', message: 'Please select your Local Government' });
                }
            }

            return errors;
        }

        function showValidationErrors(errors) {
            errors.forEach(error => showValidationError(error.field, error.message));
            
            // Show summary alert
            const errorMessages = errors.map(error => error.message);
            showAlert('danger', 'Please correct the following errors:', errorMessages);
            
            // Scroll to first error or form top
            if (errors.length > 0) {
                const firstErrorField = document.getElementById(errors[0].field);
                if (firstErrorField) {
                    firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    // If field not found, scroll to the form
                    document.getElementById('registrationForm').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        }

        function showValidationError(fieldId, message) {
            const field = document.getElementById(fieldId);
            if (!field) {
                // If field doesn't exist, show the error in the alert area only
                showAlert('danger', message);
                return;
            }

            field.classList.add('is-invalid');
            
            // Create or update feedback message
            let feedback = field.nextElementSibling;
            if (!feedback || !feedback.classList.contains('invalid-feedback')) {
                feedback = document.createElement('div');
                feedback.className = 'invalid-feedback';
                field.parentNode.insertBefore(feedback, field.nextSibling);
            }
            feedback.textContent = message;
        }

        function clearValidationState() {
            // Clear all validation states
            document.querySelectorAll('.is-invalid').forEach(element => {
                element.classList.remove('is-invalid');
            });
            
            // Clear all feedback messages
            document.querySelectorAll('.invalid-feedback').forEach(element => {
                element.textContent = '';
            });
            
            // Clear alert area
            document.getElementById('alertArea').innerHTML = '';
        }

        function showAlert(type, message, details = []) {
            const alertArea = document.getElementById('alertArea');
            let alertContent = `
                <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                    <strong>${message}</strong>
            `;
            
            if (details.length > 0) {
                alertContent += '<ul class="mt-2 mb-0">';
                details.forEach(detail => {
                    alertContent += `<li>${detail}</li>`;
                });
                alertContent += '</ul>';
            }
            
            alertContent += `
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            `;
            
            alertArea.innerHTML = alertContent;
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function isValidPhone(phone) {
            return /^\+?[\d\s-]{10,}$/.test(phone);
        }

        // Add this to the JavaScript section, after the existing event listeners
        document.getElementById('nyscStatus').addEventListener('change', function() {
            const stateOfPostingSection = document.getElementById('stateOfPostingSection');
            const stateOfPostingSelect = document.getElementById('stateOfPosting');
            
            if (this.value === 'doing_nysc') {
                stateOfPostingSection.style.display = 'block';
                // Populate states
                stateOfPostingSelect.innerHTML = '<option value="">Select State of Posting</option>';
                Object.keys(statesData).forEach(state => {
                    const option = document.createElement('option');
                    option.value = state;
                    option.textContent = state;
                    stateOfPostingSelect.appendChild(option);
                });
            } else {
                stateOfPostingSection.style.display = 'none';
                stateOfPostingSelect.value = '';
            }
        });

        // Update the validateForm function to include state of posting validation
        if (professionalStatus === 'just_finished') {
            const nyscStatus = document.getElementById('nyscStatus').value;
            if (!nyscStatus) {
                errors.push({ field: 'nyscStatus', message: 'Please select your NYSC Status' });
            }
            if (nyscStatus === 'doing_nysc') {
                const stateOfPosting = document.getElementById('stateOfPosting').value;
                if (!stateOfPosting) {
                    errors.push({ field: 'stateOfPosting', message: 'Please select your State of Posting' });
                }
            }
        }

        // Add input validation for mobile number
        document.getElementById('mobileNo').addEventListener('input', function(e) {
            const mobileNo = e.target.value.replace(/\D/g, '');
            if (mobileNo.length > 11) {
                e.target.value = mobileNo.slice(0, 11);
            }
            validateField(e.target, /^[0-9]{11}$/, 'Please enter a valid 11-digit mobile number');
        });

        // Add input validation for email
        document.getElementById('email').addEventListener('input', function(e) {
            validateField(e.target, /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/, 'Please enter a valid email address');
        });

        // Add input validation for emergency phone
        document.getElementById('emergencyPhone').addEventListener('input', function(e) {
            const emergencyPhone = e.target.value.replace(/\D/g, '');
            if (emergencyPhone.length > 11) {
                e.target.value = emergencyPhone.slice(0, 11);
            }
            validateField(e.target, /^[0-9]{11}$/, 'Please enter a valid 11-digit emergency contact number');
        });

        // Function to validate field
        function validateField(field, pattern, errorMessage) {
            const isValid = pattern.test(field.value);
            field.classList.toggle('is-invalid', !isValid);
            const feedback = field.nextElementSibling;
            if (feedback && feedback.classList.contains('invalid-feedback')) {
                feedback.textContent = errorMessage;
            }
            return isValid;
        }

        // Add this to the JavaScript section
        function closeSuccessModal() {
            const successModal = bootstrap.Modal.getInstance(document.getElementById('successModal'));
            if (successModal) {
                successModal.hide();
            }
        }

        // Reset form fields on page load
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('supportAreaField').style.display = 'none';
            document.getElementById('businessTypeField').style.display = 'none';
        });
    </script>
</body>
</html> 
