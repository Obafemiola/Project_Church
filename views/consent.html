<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Privacy Consent - The Ambassadors Church Clam</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .consent-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .consent-text {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            line-height: 1.6;
        }
        .btn-primary {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }
        .btn-primary:hover {
            background-color: #0b5ed7;
            border-color: #0a58ca;
        }
        .logo {
            max-width: 200px;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="consent-container">
            <div class="text-center mb-4">
                <img src="/images/logo.png" alt="Church Logo" class="logo">
                <h2>Data Privacy Consent</h2>
            </div>
            
            <div class="consent-text">
                <p>I hereby consent to the collection, processing, use, and transfer of my personal data to third parties for the performance of the database collection process which may arise therefrom between myself and The Ambassadors Church Clam. I affirm that I am aware and take cognizance of my rights under the Nigeria Data Protection Act and other relevant Data Protection Laws in Nigeria.</p>
            </div>

            <form id="consentForm" class="mt-4">
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="consentCheck" required>
                    <label class="form-check-label" for="consentCheck">
                        I have read and agree to the data privacy consent statement above
                    </label>
                </div>

                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary" id="proceedBtn" disabled>
                        Proceed to Registration
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('consentCheck').addEventListener('change', function() {
            document.getElementById('proceedBtn').disabled = !this.checked;
        });

        document.getElementById('consentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const response = await fetch('/api/consent', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        consent: true,
                        consentText: document.querySelector('.consent-text p').textContent
                    })
                });

                if (response.ok) {
                    window.location.href = '/registration';
                } else {
                    alert('Error recording consent. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            }
        });
    </script>
</body>
</html> 